(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function s(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerPolicy&&(o.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?o.credentials="include":n.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(n){if(n.ep)return;n.ep=!0;const o=s(n);fetch(n.href,o)}})();function P(e,t){const s=document.createElement("div");s.classList.add("card-wraper");const r=document.createElement("div");return r.classList.add("picture"),r.classList.add("opacity-0"),r.classList.add("picture"+e),r.addEventListener("click",t),s.append(r),s}function h(e){e.style.animation="",e.offsetHeight}function O(){document.querySelectorAll(".picture").forEach(e=>{h(e)})}function E(e){h(e),e.style.animation="glimpse 1s",e.addEventListener("animationend",t=>{t.target.style.animation=""})}function y(e){h(e),e.classList.remove("opacity-0"),e.classList.add("opacity-1")}function S(e){e.classList.remove("opacity-1"),e.classList.add("opacity-0")}function I(e){const t=document.createElement("div");t.classList.add("board");function s(m,f,i){return{address:m,cardId:f,cardDiv:i}}let r=[],n=0;const o=new CustomEvent("gameWon",{detail:{clickCounter:n}});function a(){return console.log(r.length),r.length===e.getBoardState().length}function l(m,f,i){const p=g=>{i.push(s(m,f,g))},C=()=>i.some(g=>g.address===m),L=()=>i[i.length-1].cardDiv,w=()=>{i.pop()};return function(g){const v=g.target;C()||(n++,i.length%2===0?(O(),p(v),y(v)):i[i.length-1].cardId===f?(p(v),y(v),a()&&t.dispatchEvent(o)):(S(L()),E(v),E(L()),w()))}}let u=0;const{row:c,col:d}=e.getDimensions();for(let m=0;m<d;m++){const f=document.createElement("div");for(let i=0;i<c;i++){const p=e.getBoardState()[u];f.append(P(p,l(u,p,r))),u++}t.append(f)}return t}function B(e){for(let t=e.length-1;t>=0;t--){let s=Math.floor(Math.random()*(t+1)),r=e[t];e[t]=e[s],e[s]=r}return e}function A(){let e=[];for(let o=0;o<14;o++)e.push(o+1,o+1);e=B(e);let t={col:7,row:4};return{getBoardState:()=>e,getDimensions:()=>t,shuffleBoard:()=>{e=B(e)}}}function b(e){const t=document.createElement("div");t.classList.add("bar-container");const s=document.createElement("div");s.classList.add("bar"),t.append(s);const r=document.createElement("p");r.classList.add("timer"),t.append(r);let n=e/1e3;function o(){const c=Math.floor(n/60),d=n%60;r.textContent=`${c}:${d<10?"0":""}${d}`}const a=new CustomEvent("timerEnd");return{startTimer:()=>{s.style.width="100%",t.style.setProperty("--color","green");let c=100;const d=setInterval(()=>{n--,o(),c-=100/(e/1e3),s.style.width=c+"%",c<=0?(s.style.width="0%",clearInterval(d),t.dispatchEvent(a)):c<=25?t.style.setProperty("--color","red"):c<=55&&t.style.setProperty("--color","yellow")},1e3)},getProgresssBar:()=>t}}function D(){const e=document.createElement("div");e.classList.add("game-screen");const t=document.createElement("div");t.classList.add("game-container");const s=document.createElement("h1");s.textContent="MEMORY";const r=A();function n(){r.shuffleBoard(),a()}function o(){r.shuffleBoard(),a()}function a(){t.innerHTML="",t.append(s);const l=I(r),u=b(18e4),c=u.getProgresssBar();t.append(l),l.addEventListener("gameWon",o);function d(){u.startTimer(),l.removeEventListener("click",d),c.addEventListener("timerEnd",n)}l.addEventListener("click",d),t.append(c),e.append(t)}return a(),e}document.addEventListener("DOMContentLoaded",()=>{const e=document.querySelector("#app");e==null||e.append(D())});
