(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function s(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(r){if(r.ep)return;r.ep=!0;const o=s(r);fetch(r.href,o)}})();function C(e,t){const s=document.createElement("div");s.classList.add("card-wraper");const n=document.createElement("div");return n.classList.add("picture"),n.classList.add("opacity-0"),n.classList.add("picture"+e),n.addEventListener("click",t),s.append(n),s}function v(e){e.style.animation="",e.offsetHeight}function P(){document.querySelectorAll(".picture").forEach(e=>{v(e)})}function E(e){v(e),e.style.animation="glimpse 1s",e.addEventListener("animationend",t=>{t.target.style.animation=""})}function L(e){v(e),e.classList.remove("opacity-0"),e.classList.add("opacity-1")}function O(e){e.classList.remove("opacity-1"),e.classList.add("opacity-0")}function S(e){const t=document.createElement("div");t.classList.add("board");function s(d,l,c){return{address:d,cardId:l,cardDiv:c}}let n=[];const r=new CustomEvent("gameWon");function o(){return console.log(n.length),n.length===e.getBoardState().length}function i(d,l,c){const u=f=>{c.push(s(d,l,f))},B=()=>c.some(f=>f.address===d),h=()=>c[c.length-1].cardDiv,w=()=>{c.pop()};return function(f){const m=f.target;B()||(c.length%2===0?(P(),u(m),L(m)):c[c.length-1].cardId===l?(u(m),L(m),o()&&t.dispatchEvent(r)):(O(h()),E(m),E(h()),w()))}}let a=0;const{row:p,col:g}=e.getDimensions();for(let d=0;d<g;d++){const l=document.createElement("div");for(let c=0;c<p;c++){const u=e.getBoardState()[a];l.append(C(u,i(a,u,n))),a++}t.append(l)}return t}function y(e){for(let t=e.length-1;t>=0;t--){let s=Math.floor(Math.random()*(t+1)),n=e[t];e[t]=e[s],e[s]=n}return e}function I(){let e=[];for(let o=0;o<14;o++)e.push(o+1,o+1);e=y(e);let t={col:7,row:4};return{getBoardState:()=>e,getDimensions:()=>t,shuffleBoard:()=>{e=y(e)}}}function A(e){const t=document.createElement("div");t.classList.add("bar-container");const s=document.createElement("div");s.classList.add("bar"),t.append(s);const n=new CustomEvent("timerEnd");return{startTimer:()=>{s.style.width="100%",t.style.setProperty("--color","green");let i=100;const a=setInterval(()=>{console.log(i),i-=100/(e/1e3),s.style.width=i+"%",i<=0?(s.style.width="0%",clearInterval(a),t.dispatchEvent(n)):i<=25?t.style.setProperty("--color","red"):i<=55&&t.style.setProperty("--color","yellow")},1e3)},getProgresssBar:()=>t}}function b(){const e=document.createElement("div");e.classList.add("game-screen");const t=document.createElement("div");t.classList.add("game-container");const s=document.createElement("h1");s.textContent="MEMORY";const n=I();function r(){n.shuffleBoard(),i()}function o(){n.shuffleBoard(),i()}function i(){t.innerHTML="",t.append(s);const a=S(n),p=A(6e4),g=p.getProgresssBar();t.append(a),a.addEventListener("gameWon",o);function d(){p.startTimer(),a.removeEventListener("click",d),g.addEventListener("timerEnd",r)}a.addEventListener("click",d),t.append(g),e.append(t)}return i(),e}document.addEventListener("DOMContentLoaded",()=>{const e=document.querySelector("#app");e==null||e.append(b())});
